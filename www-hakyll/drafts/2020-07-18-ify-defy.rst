---
title: Iffy Defy
subtitle: Import one module writing type checker plugins
slug: The iffy challenge of keeping a straight face.
tags: haskell
---
There's a great effort being made to create a language server for Haskell so
that we might have better editors. Various projects and people are coming
together to work on this. Beneath it all is ghc-lib_, an API for GHC decoupled
from GHC versions. I took this idea, the custom prelude idea and the idea of
using cabal mixins to avoid use of the ``{-# LANGUAGE CPP #-}`` pragma to
create a flatter API into the guts of GHC for those writing type checker
plugins and created ghc-corroborate_.

    "The GHC API does not make allowances for easy migrations -- it's just too
    hard. Not sure where it needs to be mentioned. ... But anyone using the GHC
    API, including plugin authors, should expect breakage at every release."

    .. raw:: html

        <footer>
            <a
                href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/3583#note_285243"
                target="_blank">
                Eisenberg
            </a>
        </footer>

.. _ghc-lib: https://hackage.haskell.org/package/ghc-lib
.. _ghc-corroborate: https://github.com/BlockScope/uom-plugin/tree/wip/thoralf/ghc-corroborate
